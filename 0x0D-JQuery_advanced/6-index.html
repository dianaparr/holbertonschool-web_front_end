<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>
        <meta charset="utf-8" />
        <title>Task 6</title>
        <!-- Latest version: jQuery 3.6.0 -->
        <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

        <script type="text/javascript">
            $(function() {
                function createFamilyTree() {
                    $("body").append("<table>");
                    $("table").append("<thead><tr><th>Firstname</th><th>Lastname</th></tr></thead>");
                    $("table thead").append("<tbody></tbody>");
                };

                function addNewMember(firstname, lastname, position) {
                    if (position === "before") {
                        $("tbody").prepend("<tr></tr>");
                        $("tbody > tr:first").append(`<td>${firstname}</td>`, `<td>${lastname}</td>`, `<td>${"(x)"}</td>`);
                        $("tbody > tr:first > td:nth-of-type(3)").click((function () { $(this).parent().remove() }));
                        $("tbody > tr:first > td:nth-of-type(3)").css("background-color", "orange");
                    } else {
                        $("tbody").append("<tr></tr>");
                        $("tbody > tr:last").append(`<td>${firstname}</td>`, `<td>${lastname}</td>`, `<td>${"(x)"}</td>`);
                        $("tbody > tr:last > td:nth-of-type(3)").click((function () { $(this).parent().remove() }));
                        $("tbody > tr:last > td:nth-of-type(3)").css("background-color", "orange");
                    }
                };

                function createForm() {
                    $("body").prepend("<input type=\"text\">", "<input type=\"text\">", "<select><option value=\"before\">Before</option><option value=\"after\">After</option></select>", "<input type=\"submit\">");
                    $("input:last").click(function () {
                        let firstname = $("input:first").val();
                        let lastname = $("input:nth-of-type(2)").val();
                        let position = $("select").val();
                        addNewMember(firstname, lastname, position);
                    })
                };

                createFamilyTree();
                createForm();
            });
        </script>

    </head>

    <body>

    </body>

</html>
